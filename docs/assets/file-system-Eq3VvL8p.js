import{e as l,c as s,u as d,M as f}from"./index-XrS_x5uc.js";l&&(s.parentNode.hidden=!1,s.addEventListener("change",async()=>{localStorage.setItem("overwrite-original-files",s.checked);const e=[];if(s.checked){for(const[t,{file:i}]of d.entries())t===f||!i.handle||e.push(i);await u(e)}}));localStorage.getItem("overwrite-original-files")!=="true"?s.checked=!1:s.checked=!0;const u=async e=>{const t=e.map(i=>i.handle.requestPermission({mode:"readwrite"}));await Promise.all(t)},h=async(e,t,i=e.name,m)=>{const o=[],n=[];for await(const r of e.values()){const c=`${i}/${r.name}`;r.kind==="file"?n.push(r.getFile().then(a=>(a.directoryHandle=e,a.handle=r,Object.defineProperty(a,"webkitRelativePath",{configurable:!0,enumerable:!0,get:()=>c})))):r.kind==="directory"&&t&&o.push(h(r,t,c))}return[...(await Promise.all(o)).flat(),...await Promise.all(n)]};export{u as checkAndPossiblyAskForPermissions,h as readDirectory};
